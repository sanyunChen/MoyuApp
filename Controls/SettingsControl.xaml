<UserControl x:Class="MoyuApp.Controls.SettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    
    <materialDesign:Card Padding="20" Margin="8" 
                        UniformCornerRadius="14">
        <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="600">
            <StackPanel>
                <TextBlock Text="设置" FontSize="24" FontWeight="Bold" 
                          Margin="0,0,0,25" Foreground="{DynamicResource PrimaryHueMidBrush}"/>
                
                <!-- 工作时间设置 -->
                <GroupBox Header="工作时间" Margin="0,0,0,20" 
                         Style="{StaticResource MaterialDesignGroupBox}">
                    <StackPanel Margin="10">
                        <TextBlock Text="设置您的上班时间段" FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="StartTimeTextBox" Grid.Column="0" 
                                    materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                    materialDesign:HintAssist.Hint="上班时间 (HH:mm)"/>
                            <TextBlock Grid.Column="1" Text="-" VerticalAlignment="Center" 
                                      HorizontalAlignment="Center" FontSize="16" FontWeight="Bold"/>
                            <TextBox x:Name="EndTimeTextBox" Grid.Column="2"
                                    materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                    materialDesign:HintAssist.Hint="下班时间 (HH:mm)"/>
                        </Grid>
                    </StackPanel>
                </GroupBox>
                
                <!-- 个人信息 -->
                <GroupBox Header="个人信息" Margin="0,0,0,20"
                         Style="{StaticResource MaterialDesignGroupBox}">
                    <StackPanel Margin="10">
                        <TextBlock Text="设置您的个人信息用于计算工作进度" FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>
                        <DatePicker x:Name="HireDatePicker" 
                                   materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                   materialDesign:HintAssist.Hint="入职日期"/>
                        
                        <ComboBox x:Name="GenderComboBox" Margin="0,15,0,0"
                                 materialDesign:HintAssist.Hint="性别（用于退休年龄计算）">
                            <ComboBoxItem Content="男（60岁）" Tag="male"/>
                            <ComboBoxItem Content="女（55岁）" Tag="female"/>
                        </ComboBox>
                    </StackPanel>
                </GroupBox>
                
                <!-- 发薪设置 -->
                <GroupBox Header="发薪设置" Margin="0,0,0,20"
                         Style="{StaticResource MaterialDesignGroupBox}">
                    <StackPanel Margin="10">
                        <TextBlock Text="设置发薪日期和工作日范围" FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>
                        <TextBox x:Name="SalaryDayTextBox" 
                                materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                materialDesign:HintAssist.Hint="发薪日期（1-31）"/>
                        
                        <TextBox x:Name="WeekdaysTextBox" Margin="0,15,0,0"
                                materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                materialDesign:HintAssist.Hint="工作日范围（1-7，例如 1-5）"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 语录设置 -->
                <GroupBox Header="语录设置" Margin="0,0,0,20"
                         Style="{StaticResource MaterialDesignGroupBox}">
                    <StackPanel Margin="10">
                        <TextBlock Text="设置积极语录的显示时间段" FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox x:Name="ActiveStartTimeTextBox" Grid.Column="0" 
                                    materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                    materialDesign:HintAssist.Hint="积极语录时间段（起始）"/>
                            <TextBlock Grid.Column="1" Text="-" VerticalAlignment="Center" 
                                      HorizontalAlignment="Center" FontSize="16" FontWeight="Bold"/>
                            <TextBox x:Name="ActiveEndTimeTextBox" Grid.Column="2"
                                    materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                    materialDesign:HintAssist.Hint="积极语录时间段（结束）"/>
                        </Grid>
                    </StackPanel>
                </GroupBox>
                
                <!-- 外观设置 -->
                <GroupBox Header="外观设置" Margin="0,0,0,20"
                         Style="{StaticResource MaterialDesignGroupBox}">
                    <StackPanel Margin="10">
                        <TextBlock Text="调整界面显示和更新频率" FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>
                        <TextBox x:Name="RefreshIntervalTextBox" 
                                materialDesign:TextFieldAssist.HasOutlinedTextField="True"
                                materialDesign:HintAssist.Hint="刷新间隔（秒，最小5）"/>
                        
                        <ToggleButton x:Name="DarkModeToggle" Margin="0,15,0,0"
                                     Content="夜间模式" HorizontalAlignment="Left"/>
                        
                        <ToggleButton x:Name="BubbleAnimationToggle" Margin="0,10,0,0"
                                     Content="气泡动画" HorizontalAlignment="Left" IsChecked="True"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 自定义倒计时 -->
                <GroupBox Header="自定义倒计时" Margin="0,0,0,20"
                         Style="{StaticResource MaterialDesignGroupBox}">
                    <StackPanel Margin="10">
                        <TextBlock Text="添加和管理您的自定义倒计时事件" FontSize="12" Opacity="0.7" Margin="0,0,0,10"/>
                        <ListBox x:Name="CustomCountdownListBox" 
                                materialDesign:ListBoxAssist.IsToggle="False"
                                MaxHeight="200"
                                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                BorderThickness="1"
                                Background="Transparent"
                                MouseDoubleClick="CustomCountdownListBox_MouseDoubleClick">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                                            <TextBlock Text="{Binding Name}" FontWeight="SemiBold" Width="120"/>
                                            <TextBlock Text="{Binding Date, StringFormat='({0:yyyy-MM-dd})'}" 
                                                      Margin="10,0,0,0" Opacity="0.7" FontSize="12"/>
                                        </StackPanel>
                                        
                                        <Button Grid.Column="1" Style="{StaticResource MaterialDesignFlatButton}"
                                               Content="删除" Tag="{Binding}"
                                               Click="DeleteCountdownButton_Click"
                                               Foreground="{DynamicResource MaterialDesignValidationErrorBrush}"
                                               Padding="8,4,8,4"/>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                        
                        <Button x:Name="AddCustomCountdownButton" 
                               Content="+ 添加倒计时" 
                               Margin="0,10,0,0"
                               Style="{StaticResource MaterialDesignOutlinedButton}"
                               Click="AddCustomCountdownButton_Click"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- 数据管理 -->
                <GroupBox Header="数据管理" Margin="0,0,0,20"
                         Style="{StaticResource MaterialDesignGroupBox}">
                    <UniformGrid Columns="2" Margin="10">
                        <Button x:Name="ExportConfigButton" 
                               Content="导出配置" 
                               Margin="5"
                               Style="{StaticResource MaterialDesignOutlinedButton}"
                               Click="ExportConfigButton_Click"/>
                        
                        <Button x:Name="ImportConfigButton" 
                               Content="导入配置" 
                               Margin="5"
                               Style="{StaticResource MaterialDesignOutlinedButton}"
                               Click="ImportConfigButton_Click"/>
                        
                        <Button x:Name="CreateBackupButton" 
                               Content="创建备份" 
                               Margin="5"
                               Style="{StaticResource MaterialDesignOutlinedButton}"
                               Click="CreateBackupButton_Click"/>
                        
                        <Button x:Name="RestoreBackupButton" 
                               Content="恢复备份" 
                               Margin="5"
                               Style="{StaticResource MaterialDesignOutlinedButton}"
                               Click="RestoreBackupButton_Click"/>
                    </UniformGrid>
                </GroupBox>
                
                <!-- 按钮区域 -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,30,0,0">
                    <Button x:Name="ApplyButton" 
                           Content="应用" 
                           Margin="0,0,10,0"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Click="ApplyButton_Click"/>
                    
                    <Button x:Name="SaveButton" 
                           Content="保存" 
                           Margin="0,0,10,0"
                           Style="{StaticResource MaterialDesignRaisedAccentButton}"
                           Click="SaveButton_Click"/>
                    
                    <Button x:Name="CancelButton" 
                           Content="取消" 
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Click="CancelButton_Click"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </materialDesign:Card>
</UserControl>